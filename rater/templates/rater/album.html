{% extends "rater/layout.html" %}

{% block title %}Album{% endblock %}

{% block script %}
<script>
    window.onload = function() {
        let album = JSON.parse(localStorage.getItem('album'));

        console.log(`You're viewing: ${album.name}`);

        document.querySelector('#album-img').src = album.images[0].url;
        document.querySelector('#album-name').innerHTML = album.name;
        document.querySelector('#album-release').innerHTML = `Release date: ${album.release_date}`;
        document.querySelector('#album-total').innerHTML = `Total tracks: ${album.total_tracks}`;

        for (let track of album.tracks.items) {
            let li = document.createElement('li');
            li.innerHTML = track.name;
            document.querySelector('#album-ul').appendChild(li);
        }
    }
</script>
{% endblock %}

{% block body %}

    <img id="album-img">

    <h1 id="album-name"></h1>

    {% if user.is_authenticated %}
        <i class="bi bi-star" id="one-star"></i>
        <i class="bi bi-star" id="two-stars"></i>
        <i class="bi bi-star" id="three-stars"></i>
        <i class="bi bi-star" id="four-stars"></i>
        <i class="bi bi-star" id="five-stars"></i>
        <button id="rate-album">Rate and save</button>
    {% else %}
        <p>Log in or register to rate album!</p>
    {% endif %}

    <h5 id="album-release"></h5>

    <h5 id="album-total"></h5>

    <hr>

    <ul id="album-ul">
    </ul>

{% endblock %}